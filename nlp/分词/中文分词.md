
# 中文分词

* ### 概述

   词是最小的能够独立活动的有意义的语言成分，一般分词是自然语言处理的第一项核心技术。英文中每个句子都将词用空格或标点符号分隔开来，而在中文中很难对词的边界进行界定，难以将词划分出来。在汉语中，虽然是以字为最小单位，但是一篇文章的语义表达却仍然是以词来划分的。因此处理中文文本时，需要进行分词处理，将句子转为词的表示，这就是中文分词。

* ### 中文分词的难题

   1. 分词规则

       构建完美的分词规则便可以将所有的句子正确的划分，但是这根本无法实现，语言是长期发展自然而然形成的，而且语言规则庞大复杂，很难做出完美的分词规则。

   2. 消除歧义

        在中文句子中，很多词是由歧义性的，在一句话也可能有多种分词方法。比如：”结婚/的/和尚/未结婚/的“，“结婚/的/和/尚未/结婚/的”，人分辨这样的句子都是问题，更何况是机器。

   3. 未登陆词

        没有被收录在分词词表中但必须切分出来的词，包括各类专有名词（人名、地名、企业名等）、缩写词、新增词汇等等

* ### 主流的分词方法

    1. 基于规则的分词
       1. 概述

           主要是人工建立词库也叫做词典，通过词典匹配的方式对句子进行划分。其实现简单高效，但是对未登陆词很难进行处理。主要有正向最大匹配法，逆向最大匹配法以及双向最大匹配法。
       2. 正向最大匹配法(FMM)

            从句子的左边向右查找，并逐一与词典匹配，匹配成功后尝试将下一个字合并入当前词，如果合并后依然可以匹配成功就以此类推，直到匹配失败时将最长的词记录，并从词尾处再进行下一次匹配
       3. 逆向最大匹配法(RMM)

            原理与FMM类似，只是方向相反。逆向匹配的切分精度略高于正向匹配，遇到的歧义现象也较少
       4. 双向最大匹配法(Bi-MM)

            将FMM与RMM结果进行比较，然后按照最大匹配原则，选取词数切分最少的作为结果。中文中90.0%左右的句子，正向最大匹配法和逆向最大匹配法完全重合且正确，只有大概9.0%的句子两种切分方法得到的结果不一样，但其中必有一个是正确的（歧义检测成功），只有不到1.0%的句子，使用正向最大匹配法和逆向最大匹配法的切分虽然重合但是错的，或者两种方法切分不同但结果都不对（歧义检测失败）。
       5. 双向最大匹配法的规则

            1. FMM与RMM分词结果词数不同时，选择分词数量较少的那个
            2. 分词结果相同，没有歧义，返回任意一个
            3. 分词结果不同，返回单字的词出现数量最少的那个
       6. 算法示意图
            ![avatar](/nlp/分词/基于规则的分词方法.png)
       7. 基于规则的分词算法优缺点
          1. 实现简单，效果尚可
          2. 速度快，都是O(n)时间复杂度
          3. 对于未登陆词效果很差，非常依赖于词典库
          4. 随着字典库的增大，词与词直接的交叉会越来越多，产生难以处理的歧义问题

    2. 基于统计的分词方法

        统计分词的主要思想是把每个词看做是由字组成的，如果相连的字权重越大，就证明这段相连的字很有可能就是一个词，权重计算会包括出现频率，上下文关联性等。jieba分词工具就是采用了基于统计的分词
       1. N最短路径

            利用动态规划思想，寻找处所有可能出现的分词结果，然后在这些结果中寻找一条权值和最大的路径, 路径上的边标志了最可能的分词结果.通常我们只寻找权值和最大的那一条路径。
       2. N最短路径示意图

           ![avatar](/nlp/分词/n最短路径分词.png)
       3. N元文法模型(N-Gram)

            令C是待切分的汉字串，W={W1W2...Wn}．W 是切词的结果。
            设P(W|C)是汉字串C切分为W的某种估计概率。
            Wa，Wb，⋯．Wk是C的所有可能的切分方案。那么，基于统计的切分模型就是这样的一种分词模型，它能够找到目的词串W ，使得W满足：

            ```text
            P(W|C)=MAX(P(Wa|C),P(Wb|C)...P(Wk|C))，
            ```

            根据贝叶斯公式得:

            ```text
            P(W|C)=[P(W)P(C|W)]/P(C)
            ```

            且P(C)是一个常数,P(C|W)=1,所以只需要求出P(W)即可，根据乘法公式得

            ```text
            P(W)=P(W1)P(W2|W1)P(W3|W1W2)⋯P(Wk|W1,W2...Wk-1)
            ```

            由此公式可计算得出某种拆词方法得估计概率，计算所有切分可能选择最大可能性得结果即可
